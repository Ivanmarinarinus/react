(window.webpackJsonptetrix=window.webpackJsonptetrix||[]).push([[0],{15:function(t,n,e){t.exports=e(26)},20:function(t,n,e){},26:function(t,n,e){"use strict";e.r(n);var A=e(0),r=e.n(A),a=e(8),o=e.n(a),c=(e(20),e(1)),l=function(){return Array.from(Array(20),function(){return Array(12).fill([0,"clear"])})},i=function(t,n,e){for(var A=e.x,r=e.y,a=0;a<t.tetromino.length;a+=1)for(var o=0;o<t.tetromino[a].length;o+=1)if(0!==t.tetromino[a][o]&&(!n[a+t.pos.y+r]||!n[a+t.pos.y+r][o+t.pos.x+A]||"clear"!==n[a+t.pos.y+r][o+t.pos.x+A][1]))return!0;return!1},u=e(2),p=e(3),g=e(9),Q=e.n(g);function f(){var t=Object(u.a)(["\n  display: flex;\n  align-items: flex-start;\n  padding: 40px;\n  margin: 0 auto;\n  max-width: 900px;\n\n  aside {\n    width: 100%;\n    max-width: 200px;\n    display: block;\n    padding: 0 20px;\n  }\n"]);return f=function(){return t},t}function s(){var t=Object(u.a)(["\n  width: 100vw;\n  height: 100vh;\n  background: url(",") #000;\n  background-size: cover;\n  overflow: hidden;\n"]);return s=function(){return t},t}var B=p.a.div(s(),Q.a),d=p.a.div(f());var b=e(12),S={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},O=function(){var t="IJLOSTZ"[Math.floor(Math.random()*"IJLOSTZ".length)];return S[t]};function C(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(t);n&&(A=A.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,A)}return e}var m=function(){var t=Object(A.useState)({pos:{x:0,y:0},tetromino:S[0].shape,collided:!1}),n=Object(c.a)(t,2),e=n[0],r=n[1];function a(t,n){var e=t.map(function(n,e){return t.map(function(t){return t[e]})});return n>0?e.map(function(t){return t.reverse()}):e.reverse()}var o=Object(A.useCallback)(function(){r({pos:{x:4,y:0},tetromino:O().shape,collided:!1})},[]);return[e,function(t){var n=t.x,e=t.y,A=t.collided;r(function(t){return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?C(e,!0).forEach(function(n){Object(b.a)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):C(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}({},t,{pos:{x:t.pos.x+=n,y:t.pos.y+=e},collided:A})})},o,function(t,n){var A=JSON.parse(JSON.stringify(e));A.tetromino=a(A.tetromino,n);for(var o=A.pos.x,c=1;i(A,t,{x:0,y:0});)if(A.pos.x+=c,(c=-(c+(c>0?1:-1)))>A.tetromino[0].length)return a(A.tetromino,-n),void(A.pos.x=o);r(A)}]},h=function(t,n){var e=Object(A.useState)(l()),r=Object(c.a)(e,2),a=r[0],o=r[1],i=Object(A.useState)(0),u=Object(c.a)(i,2),p=u[0],g=u[1];return Object(A.useEffect)(function(){g(0);var e=function(e){var A=e.map(function(t){return t.map(function(t){return"clear"===t[1]?[0,"clear"]:t})});return t.tetromino.forEach(function(n,e){n.forEach(function(n,r){0!==n&&(A[e+t.pos.y][r+t.pos.x]=[n,"".concat(t.collided?"merged":"clear")])})}),t.collided?(n(),function(t){return t.reduce(function(n,e){return-1===e.findIndex(function(t){return 0===t[0]})?(g(function(t){return t+1}),n.unshift(new Array(t[0].length).fill([0,"clear"])),n):(n.push(e),n)},[])}(A)):A};o(function(t){return e(t)})},[t.collided,t.pos.x,t.pos.y,t.tetromino,n]),[a,o,p]};function N(){var t=Object(u.a)(["\n  display: grid;\n  grid-template-rows: repeat(\n    ",",\n    calc(25vw / ",")\n  );\n  grid-template-columns: repeat(",", 1fr);\n  grid-gap: 1px;\n  border: 2px solid #333;\n  width: 100%;\n  max-width: 25vw;\n  background: #111;\n"]);return N=function(){return t},t}var v=p.a.div(N(),function(t){return t.height},function(t){return t.width},function(t){return t.width});function D(){var t=Object(u.a)(["\n  width: auto;\n  /* border-radius: 5px; */\n  background: rgba(",", 0.8);\n  border: ",";\n  border-bottom-color: rgba(",", 0.1);\n  border-right-color: rgba(",", 1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n"]);return D=function(){return t},t}var G=p.a.div(D(),function(t){return t.color},function(t){return 0===t.type?"0px solid":"4px solid"},function(t){return t.color},function(t){return t.color},function(t){return t.color},function(t){return t.color}),w=r.a.memo(function(t){var n=t.type;return r.a.createElement(G,{type:n,color:S[n].color},console.log("rerender cell"))}),x=function(t){var n=t.stage;return r.a.createElement(v,{width:n[0].length,height:n.length},n.map(function(t){return t.map(function(t,n){return r.a.createElement(w,{key:n,type:t[0]})})}))};function U(){var t=Object(u.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin: 0 0 20px 0;\n  padding: 20px;\n  border: 4px solid #333;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  color: ",";\n  background: #000;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 0.8rem;\n"]);return U=function(){return t},t}var k=p.a.div(U(),function(t){return t.gameOver?"red":"#999"}),L=function(t){var n=t.gameOver,e=t.text;return r.a.createElement(k,{gameOver:n},e)};function y(){var t=Object(u.a)(["\n  box-sizing: border-box;\n\n  margin: 0 0 20px 0;\n  padding: 20px;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  border: none;\n  color: white;\n  background: #333;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n"]);return y=function(){return t},t}var E=p.a.button(y()),K=function(t){var n=t.callback;return r.a.createElement(E,{onClick:n},"Start Game")},j=function(){var t=Object(A.useState)(null),n=Object(c.a)(t,2),e=n[0],a=n[1],o=Object(A.useState)(!1),u=Object(c.a)(o,2),p=u[0],g=u[1],Q=m(),f=Object(c.a)(Q,4),s=f[0],b=f[1],S=f[2],O=f[3],C=h(s,S),N=Object(c.a)(C,3),v=N[0],D=N[1],G=function(t){var n=Object(A.useState)(0),e=Object(c.a)(n,2),r=e[0],a=e[1],o=Object(A.useState)(0),l=Object(c.a)(o,2),i=l[0],u=l[1],p=Object(A.useState)(0),g=Object(c.a)(p,2),Q=g[0],f=g[1],s=[40,100,300,1200],B=Object(A.useCallback)(function(){t>0&&(a(function(n){return n+s[t-1]*(Q+1)}),u(function(n){return n+t}))},[Q,s,t]);return Object(A.useEffect)(function(){B()},[B,t,r]),[r,a,i,u,Q,f]}(N[2]),w=Object(c.a)(G,6),U=w[0],k=w[1],y=w[2],E=w[3],j=w[4],T=w[5];console.log("re-render");var W=function(t){i(s,v,{x:t,y:0})||b({x:t,y:0})},I=function(){y>10*(j+1)&&(T(function(t){return t+1}),a(1e3/(j+1)+200)),i(s,v,{x:0,y:1})?(s.pos.y<1&&(console.log("GAME OVER!!!"),g(!0),a(null)),b({x:0,y:0,collided:!0})):b({x:0,y:1,collided:!1})};!function(t,n){var e=Object(A.useRef)();Object(A.useEffect)(function(){e.current=t},[t]),Object(A.useEffect)(function(){if(null!==n){var t=setInterval(function(){e.current()},n);return function(){clearInterval(t)}}},[n])}(function(){I()},e);var F=function(t){var n=t.keyCode;p||(37===n?W(-1):39===n?W(1):40===n?(a(null),I()):38===n&&O(v,1))};return r.a.createElement(B,{role:"button",tabIndex:"0",onKeyDown:function(t){return F(t)},onKeyUp:function(t){var n=t.keyCode;p||40===n&&a(1e3/(j+1))}},r.a.createElement(d,null,r.a.createElement(x,{stage:v}),r.a.createElement("aside",null,p?r.a.createElement(L,{gameOver:p,text:"Game Over"}):r.a.createElement("div",null,r.a.createElement(L,{text:"Score: ".concat(U)}),r.a.createElement(L,{text:"rows: ".concat(y)}),r.a.createElement(L,{text:"Level: ".concat(j)})),r.a.createElement(K,{callback:function(){D(l()),a(1e3),S(),k(0),T(0),E(0),g(!1)}})),r.a.createElement("footer",null,r.a.createElement("p",null,"made with   ",r.a.createElement("svg",{width:"15",height:"15"},r.a.createElement("image",{href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABnklEQVRoQ+1Z4c7DIAj8/LL3f+WuumiMkx4guJWsv5ZVgeMOajAdx/EX4fmPACJjCAPkgRhJKZUlpwTfNHi+S6vSrPYpH+f/rwDAc7loFjxlL4OavWMAZRfpzEe1TwKRgOgBUIBGkFb2SSBaBxIwlj6mQCwcIECWPvoade1afdD5tyWIUaoNiKcT1HG07/uYW7HfEUhNQJZYYeTOICoY1xrRSkazr0grAiP5iMH+smoytWtPGGn9gOySDNfPjxFupnatC9N+Q0irHVF20e/pJwQjOUERTr8FQxhG4gHhTj88C1Zqu485HiOl8okhmzRTO9aPsb4xcgcwsxhjSqufSuyQh8YHpRiSkW+U2FVMYaT1ALOH/Pn/iuEEUghkBBnQ6Fy6hxMDvHG6urGSBqRcz7qxgox8spNxmFCNTCWGldlv26S+4GXoGFB14DWhlAJQMdKD0jq8YmrFJmRkV3teAVEOvKszbIOuxupKqObYXQsZ0mRUs4eKA0oLAZjVDWoElgCqf1Mg4zdnBOQBoPlcrREJY55rzWrEM0iO7TBAnkw9i4eyTl80AAAAAElFTkSuQmCC",id:"svg_1",height:"15px",width:"15px"}))," by ",r.a.createElement("strong",null,"Ivan Marin")))))},T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(j,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},9:function(t,n){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAiMAAAHxCAIAAAAwVitfAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAjXSURBVHhe7d3RcdvWFkBRO73IVagENQDUwTJUB9AAS2BhnsncDzixNLbETYHgWj85v29eZnYOdXj5/enpxzcAyPwz/gkADaUBoOXTM9iveZ7GtLEs65jgTthpAGgpDQAtpQGgpTQAtJQGgJbSANBy5cwvnNUCV2enAaClNAC0lAaAltIA0FIaAFpKA0DLlTP8Nbfg8FfsNAC0lOZNp/NlTAB8gtK86fXleUwAfILSANBSGgBaVyuNv2oA8FuunIFH4Tz9q/j0DICW0gDQUhoAWkoDQEtpAGgpDQAtV84AtOw0ALSUBoCW0gDQUhoAWkoDQEtpAGgpDQAtpQGgpTQAtJQG4EHd7LeSvUYDQMtOA0BLaQBo+fQMOKB5nsa0sSzrmLgtOw0ALaUBoKU0ALSUBoCW0sAe3ewrdXADSgN79PryPCa4f66cAWjZaQBoKQ0ALaUBoKU0ALSUBoCW0gDQUhoAWkoDQEtpAGgpDQAtpQGgpTQAtJQGgJbSANBSGgBaSgNAS2kAaCkNAC2lAaClNAC0lAaAltIA0FIaAFpKA0BLaQBoKQ0ALaU5gtP5MiaA/fn+9PRjjHsyz9OYNpZlHRMA9+PKO43/uAbgP65cmteX5zEBwL/8nQaAltIA0FIaAFpKA0Brp1fOAByGnQaAltIA0FIaAFpKA0BLaQBoKQ0ALaUBoKU0ALSUBoCW0gDQUhoAWkoDQEtpAGgpDQAtpQGgpTQAtJQGgJbSANBSGgBaSgPwWE7ny5hu5fvT048xAkDATgNAS2kAaCkNAC2lAaClNAC0lAaAVnXlPM/TmDaWZR0TAA/DTgNAS2kAaCkNAC2lAaClNAC0lAaAlrecAWjZaQBoKQ0ALaUBoKU0ALSUBoCW0gDQcuXMNXnDG/g/Ow0ALaUBoKU0ALSUBoCW0gDQUhoAWq6cgc9y3c777DQAtJQGgJbSANBSGgBaSgNAS2kAaLlyBqBlpwGgpTQAtJQGgJbSANBSGgBaSgNAy5Uz4DFmWnYaAFpKA0BLaQBoKQ0ALaUBoKU0ALRcOQPQstMA0FIaAFpKA0BLaQBoKQ0ALaUBoKU0ALSUBoCW0gDQUhoAWkoDQEtpAGgpDQAtpQGgpTQAtJQGgJbSANBSGlqn82VMwKPy684AtOw0ALSUBoCW0gDQUhoAWkoDQEtpAGgpDQAtpQGg5ZubALcwz9OYNpZlHdOh2WkAaCkNAC2lAaClNAC0lAbgPX754vOUBuA9ry/PY+KjXDkD0Lr+TmPTBGDLTgNAy99pAGgpDQAtpQGgpTQAtFwE/MYjP7kKcHV2GgBaSgNAS2kAaCkNAC2lAaClNAC0XDkD0LLTANBSGgBaSgNAS2kAaCkNAC2lAaClNAC0lAaAltIA0FIaAFpKA0BLaQBoKQ0ALW85c3DzPI1pY1nWMcH+HO9fWjsNAC2lAaClNAC0lAaAltIA0FIaAFqunAFo2WkAaCkNAC2lAaClNAC0lAaAltIA0NrplbP3dwEOw04DQEtpAGgpDQAtpQGgpTQAtJQGgJa3nAFo2WkAaCkNAC2lAaClNAC0lAaAltIA0HLlfH0eogbYstMA0FIaAFpKA0BLaQBoKQ0ALaUBoOXKGYCWnQaAltIA0FIaAFpKA0BLaQBoKQ0ALaUBoKU0ALSUBoCW0gDQUhr4uNP5Mibgbd49A6BlpwGgpTQAtJQGgJbSANBSGgBaSgNAS2kAaCkNAC2lAaClNAC0lAaAltIA0FIaAFpKA0BLaQBo+X0a4HbmeRrTxrKsY+Kg7DQAtJQGgJbSANBSGgBaSgNAS2kAaLlyBqBlpwGgpTQAtJQGgJbSANBSGgBaSgNA61FKczpfxgTAbfk+DQAtn54B0FIaAFpKA0BLaQBoKQ0Arb+7PZvnaUwby7KOiR3w/xGwN3YaAFpKA0BLaQBoKQ0ALaUBoKU0ALS8sAlAy04DQEtpAGgpDQAtpQGgpTQAtJQGgJbSANBSGgBaSgNAS2kAaCkNAC2lAaClNAC0vOUMcAfmeRrTxrKsY9o3Ow0ALaUBoKU0ALSUBoCW0gDQUhoAWq6cAWjZaQBoKQ0ALaUBoKU0ALSUBoCW0gDQUhoAWkoDQEtpAGgpDQAtpQGgpTQAtJQGgJa3nDm4eZ7GtLEs65ju0PH+F3F4dhoAWkoDQEtpAGgpDQAtpQGgpTQAtFw5A9Cy0wDQUhoAWkoDQEtpAGgpDQAtpQGgpTQAtJQGOI7T+TIm9sQ3NwFo2WkAaCkNAC2lAaClNAC0lAaAltIA0FIaAFpKA0BLaQAeyJc8o+CNAABadhoAWnaaPzXP05g2lmUdEwBvsNMA0FIaAFpKA0BLaQBoKQ0ALaUBoOXKGQaH7BCx0wDQUhoAWkoDQEtpAGgpDQAtpQGg5coZgJadBoCW0gDQUhoAWkoDQEtpAGgpDQAtpQGgpTQAtJQGgJbSANBSGgBaSgNAS2kAaH2wNKfzZUwA8C6/GgBAy6dnALSUBoCW0gDQUhoAWkoDQEtpAGgpDQAtpeEjfHUX+HO+uQlAy04DQEtpAGgpDQAtf6cBPmuepzFtLMs6Jh6enQaAltIA0FIaAFpKA0BLaQBoKQ0ALVfOALTsNAC0lAaAltIA0FIaAFpKA0BLaQBoKQ0ALaUBoKU0ALSUBoCW0gDQUhoAWkoDQEtpAGgdrTSn82VMAOyD36cBoOXTMwBaSgNAS2kAaCkNAK0rXATM8zSmjWVZxwTAY7PTANBSGgBaSgNAS2kAaCkNAC2lAaDl3TOA4/var6PYaQBoKQ0ALaUBoKU0ALSUBoCW0gDQcuV8x7yiDdwFOw3AL07ny5i4EqUB+MXry/OYuBKlAaClNAC0lAaAltIA0HLlDEDLTgNAS2kAaCkNAC2lAaClNAC0lAaAlitnGLyNDRE7DQAtpQGgpTQAtJQGgJbSANBSGgBarpwBaNlpAGgpDQAtpQGgpTQAtJQGgJbSANBSGgBaSgNAS2kAaCkNAC2lAaClNAC0lAaAltIA0FIaAFpKA0BLaQAoffv2E8/rm5ZSTOw7AAAAAElFTkSuQmCC"}},[[15,1,2]]]);
//# sourceMappingURL=main.b2e70d8a.chunk.js.map